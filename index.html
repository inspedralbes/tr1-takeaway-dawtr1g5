<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="csrf-token" content="{{ csrf_token() }}">
  <title>PreSidis</title>
  <link href=" https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css " rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="css/newCSS.css">
  <link rel="stylesheet" href="css/carrousel.css">
</head>

<body>

  <div id="app">

    <!--HEADER-->
    <header>
      <div class="header" v-if="!mostrar('checkout') && !mostrar('carro') && !mostrar('portada')">
        <img class="header__logo" src="img/logoPressidis.PNG" alt="">
        <div class="search-container">
          <input v-model="navegacion.inputValue" type="text" class="search-input" placeholder="Search...">
          <img class="search-icon" src="img/search.png" alt="Search">
        </div>
      </div>
      <div v-else-if="mostrar('carro')" class="header-carro">
        <h1 class="header__price">€ {{calcularPriceTotal()}}</h1>
      </div>
      <div class="header-landing" v-else-if="mostrar('portada') || mostrar('checkout') || mostrar('check-order')">
        <img class="landing-logo" src="img/presidis.png" alt="">
        <button class="button-footer">
          <svg width="50px" height="50px" stroke="currentColor" viewBox="0 0 24 24" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="6" r="4" stroke-width="1" />
            <path
              d="M19.9975 18C20 17.8358 20 17.669 20 17.5C20 15.0147 16.4183 13 12 13C7.58172 13 4 15.0147 4 17.5C4 19.9853 4 22 12 22C14.231 22 15.8398 21.8433 17 21.5634"
              stroke-width="1" stroke-linecap="round" />
          </svg>
        </button>
      </div>
    </header>

    <!-- PORTADA -->
    <div class="landing-page" v-if="mostrar('portada')">
      <div class="landing-container">
        <div class="landing-form">
          <form @submit.prevent="buscarTicket">
            <input class="input" v-model="ticket.ticketInput" type="text"
              placeholder="Escriu el ID de la teva comanda...">
            <button @click="buscarTicket" class="button-footer search-order">
              <svg width="50x" height="50px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                stroke="currentColor">
                <path d="M18.5 18.5L22 22" stroke-width="1" stroke-linecap="round" />
                <path
                  d="M6.75 3.27093C8.14732 2.46262 9.76964 2 11.5 2C16.7467 2 21 6.25329 21 11.5C21 16.7467 16.7467 21 11.5 21C6.25329 21 2 16.7467 2 11.5C2 9.76964 2.46262 8.14732 3.27093 6.75"
                  stroke-width="1" stroke-linecap="round" />
              </svg>
            </button>
          </form>
        </div>
        <section id="slideshow">
          <div class="entire-content">
            <div class="content-carrousel">
              <figure v-for="(actual, index) in portada.productosRandom" class="shadow" :key="index">
                <img :src="'./laravel/public/' + actual.image" />
              </figure>
            </div>
          </div>
        </section>
        <button @click="cambiarDiv('tienda')" class="button is-black">Ir a la tienda</button>
      </div>
    </div>

    <!-- TIENDA -->
    <div v-if="mostrar('tienda')" class="tienda">
      <div v-for="(actual,index) in filterProducts" :key="index" class="product-container">
        <div class="cd-image-container">
          <button class="btn-single-product" @click="botonProducte(actual.id)">
            <img :src="'./laravel/public/' + actual.image" alt="">
          </button>
          <p class="cd-price">€ {{actual.price}}</p>
          <div :class="['in-cart',{'bought': esRepetido(actual.id)}]">
            <img src="img/shopping-cart-filled.png" alt="">
          </div>
        </div>
        <p class="cd-name">{{actual.name}}</p>
        <p class="cd-info">{{actual.artist}} ({{actual.year}})</p>
        <button @click="agregarAlCarro(actual.id)" class="add-to-cart-container">
          <img class="add-to-cart-img" src="img/cart.jpg" alt="">
        </button>
      </div>
    </div>

    <!-- PRODUCTE -->
    <div v-if="mostrar('producte')">
      <div class="singleProduct-container">
        <button class="btn-atras" @click="cambiarDiv('tienda'); divInfoActual = ''">
          <svg class="flecha-producte" stroke="currentColor" viewBox="0 0 24 24" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path d="M16 12H8M8 12L11 9M8 12L11 15" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"
              stroke-linejoin="round" />
            <path
              d="M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7"
              stroke-width="1" stroke-linecap="round" />
          </svg>
        </button>

        <div class="img-container">
          <img :src="'./laravel/public/' + tienda.singleProduct.image" alt="" class="img-product">
          <p class="cd-price-product">€ {{tienda.singleProduct.price}}</p>
        </div>

        <p class="product-name">{{tienda.singleProduct.name}}</p>
        <p class="product-info">{{tienda.singleProduct.artist }} ({{tienda.singleProduct.year }})</p>
        <p class="product-info">{{formatDuration(tienda.singleProduct.duracion)}}</p>
        <p class="product-info">{{tienda.singleProduct.reproducciones}}M</p>
        <!-- <div class="valoration-container">
          <div class="rating">
            <input value="5" name="rate" id="star5" type="radio">
            <label title="text" for="star5"></label>
            <input value="4" name="rate" id="star4" type="radio">
            <label title="text" for="star4"></label>
            <input value="3" name="rate" id="star3" type="radio" checked="">
            <label title="text" for="star3"></label>
            <input value="2" name="rate" id="star2" type="radio">
            <label title="text" for="star2"></label>
            <input value="1" name="rate" id="star1" type="radio">
            <label title="text" for="star1"></label>
          </div>
        </div> -->
        <div class="add-product-cart">
          <button @click="agregarAlCarro(tienda.singleProduct.id)" class="add-to-cart-container">
            <img class="add-to-cart-img" src="img/cart.jpg" alt="">
          </button>
        </div>


        <hr>

        <div class="nav-container">
          <nav>
            <ul class="nav-content">
              <li :class="{ active: tienda.divInfoActual === 'tracklist' }">
                <a @click="mostrarInfo('tracklist')">Tracklist</a>
              </li>
              <li :class="{ active: tienda.divInfoActual === 'productora' }">
                <a @click="mostrarInfo('productora')">Productora</a>
              </li>
              <li :class="{ active: tienda.divInfoActual === 'compositores' }">
                <a @click="mostrarInfo('compositores')">Compositores</a>
              </li>
            </ul>
          </nav>
        </div>

        <div v-if="tienda.divInfoActual==='tracklist'">
          <div class="info-producte">
            <ul>
              <li v-for="track in splitTracklist(tienda.singleProduct.tracklist)">{{ track }}</li>
            </ul>
          </div>
        </div>

        <div v-if="tienda.divInfoActual==='productora'">
          <p class="product-productora">{{tienda.singleProduct.productora}}</p>
        </div>

        <div v-if="tienda.divInfoActual==='compositores'">
          <p class="product-compositores">{{tienda.singleProduct.compositores}}</p>
        </div>

      </div>
    </div>


    <!-- CARRO -->
    <div class="allCart-container" v-if="mostrar('carro')">
      <div v-for="(actual,index) in carrito.productesAddToCart" class="carro product-container">
        <img :src="'./laravel/public/' + actual.image" alt="" class="carro cd-image">
        <div class="carro carro-info">
          <p class="carro cd-name">{{actual.name}}</p>
          <p class="carro cd-info">{{actual.artist}} ({{actual.year}})</p>
          <div class="carro carro-btns">
            <button @click="substractCountProduct(carrito.productesAddToCart,index)">-</button>
            <input type="text" :placeholder="actual.count" disabled>
            <button @click="addCountProduct(carrito.productesAddToCart,index)">+</button>
            <p class="carro total-price">€{{calcularPriceProduct(index)}}</p>
            <button class="deleteCart" @click="deleteProduct(carrito.productesAddToCart,index)">Delete</button>
          </div>
        </div>
      </div>
      <div class="checkout-btn-container">
        <button @click="activarModal()" class="button is-black">Confirmar?</button>
      </div>

      <div :class="['modal',{'is-active': navegacion.activeModal}]">
        <div class="modal-background"></div>
        <div class="modal-card">
          <header class="modal-card-head">
            <p class="modal-card-title">Confirma les teves dades</p>
            <button @click="activarModal()" class="delete" aria-label="close"></button>
          </header>
          <section class="modal-card-body">

            <div class="confirm_payment">
              <label for="user_name">Nom complet</label>
              <input id="user_name" class="input" v-model="usuario.userName" type="text"
                placeholder="Escriu el teu nom complet...">

              <div class="field">
                <label for="user_email">Email</label>
                <div class="control">
                  <input id="user_email" class="input" v-model="usuario.userEmail" type="email"
                    placeholder="exemple@exemple.cat">
                  <span class="icon is-small is-left">
                    <i class="fas fa-envelope"></i>
                  </span>
                  <span class="icon is-small is-right">
                    <i class="fas fa-exclamation-triangle"></i>
                  </span>
                </div>
              </div>
            </div>
          </section>
          <footer class="modal-card-foot">
            <button @click="checkout()" class="button is-black">Confirmar comanda</button>
            <button @click="activarModal()" class="button">Cancel</button>
          </footer>
        </div>
      </div>
    </div>

    <!-- CHECKOUT -->
    <div v-if="mostrar('checkout')" class="checkout">
      <div class="checkout-container">
        <p class="checkout-gracies">Gràcies per la teva compra, <span>{{ticket.ticket.user_name}}</span></p>
        <p class="">El teu id de recollida es:</p>
        <h1 class="checkout-id">{{ticket.ticket.id}}</h1>
        <img class="checkout-qr" :src="'./laravel/public/' + ticket.ticket.qr" alt="">
        <button @click="cambiarDiv('portada')" class="button is-black">Tornar a l'inici</button>
      </div>
    </div>

    <!-- CHECK ORDER -->
    <div>
      <div v-if="mostrar('check-order')" class="check-order">
        <div class="checkout-container">
          <p class="checkout-gracies">Gràcies per la teva compra, <span>{{ticket.ticket.user_name}}</span></p>
          <p class="">El teu id de recollida es:</p>
          <h1 class="checkout-id">{{ticket.ticket.id}}</h1>

          <div v-if="ticket.ticket.estat==='Pendent de preparar'" class="pendent-preparar">
            <svg stroke="currentColor" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 19L17.5 17.5" stroke-width="1" stroke-linecap="round" />
              <path d="M19 5L17.5 6.5" stroke-width="1" stroke-linecap="round" />
              <path d="M5 19L6.5 17.5" stroke-width="1" stroke-linecap="round" />
              <path d="M5 5L6.5 6.5" stroke-width="1" stroke-linecap="round" />
              <path d="M2 12H4" stroke-width="1" stroke-linecap="round" />
              <path d="M19.9998 12L21.9998 12" stroke-width="1" stroke-linecap="round" />
              <path d="M12 4.00021L12 2.00021" stroke-width="1" stroke-linecap="round" />
              <path
                d="M13.7781 14.364C14.9497 13.1924 14.9497 11.2929 13.7781 10.1214C12.6065 8.94978 10.707 8.94978 9.53545 10.1214C9.0898 10.567 8.77857 11.4921 8.56396 12.4675C8.24305 13.926 8.08259 14.6553 8.66339 15.2361C9.24419 15.8169 9.97346 15.6564 11.432 15.3355C12.4073 15.1209 13.3324 14.8096 13.7781 14.364Z"
                stroke-width="1" />
              <path
                d="M9 21.5422C4.94289 20.2679 2 16.4776 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 16.4776 19.0571 20.2679 15 21.5422"
                stroke-width="1" stroke-linecap="round" />
            </svg>
          </div>
          <div v-else-if="ticket.ticket.estat==='En preparació'" class="preparacio">
            <svg stroke="currentColor" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M9 21.5422C4.94289 20.2679 2 16.4776 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 16.4776 19.0571 20.2679 15 21.5422"
                stroke-width="1" stroke-linecap="round" />
              <path d="M19 19L17.5 17.5" stroke-width="1" stroke-linecap="round" />
              <path d="M19 5L17.5 6.5" stroke-width="1" stroke-linecap="round" />
              <path d="M5 19L6.5 17.5" stroke-width="1" stroke-linecap="round" />
              <path d="M5 5L6.5 6.5" stroke-width="1" stroke-linecap="round" />
              <path d="M2 12H4" stroke-width="1" stroke-linecap="round" />
              <path d="M19.9998 12L21.9998 12" stroke-width="1" stroke-linecap="round" />
              <path d="M12 4.00021L12 2.00021" stroke-width="1" stroke-linecap="round" />
              <path
                d="M15 11.9999C15 13.6567 13.6569 14.9999 12 14.9999C10.3431 14.9999 9 13.6567 9 11.9999C9 11.3696 9.43408 10.4954 9.972 9.65399C10.7764 8.39573 11.1786 7.7666 12 7.7666C12.8214 7.7666 13.2236 8.39573 14.028 9.65399C14.5659 10.4954 15 11.3696 15 11.9999Z"
                stroke-width="1" />
            </svg>
          </div>

          <div v-else-if="ticket.ticket.estat==='Preparat per recollir'" class="preparat">
            <svg stroke="currentColor" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 19L17.5 17.5" stroke-width="1" stroke-linecap="round" />
              <path d="M19 5L17.5 6.5" stroke-width="1" stroke-linecap="round" />
              <path d="M5 19L6.5 17.5" stroke-width="1" stroke-linecap="round" />
              <path d="M5 5L6.5 6.5" stroke-width="1" stroke-linecap="round" />
              <path d="M2 12H4" stroke-width="1" stroke-linecap="round" />
              <path d="M19.9998 12L21.9998 12" stroke-width="1" stroke-linecap="round" />
              <path d="M12 4.00021L12 2.00021" stroke-width="1" stroke-linecap="round" />
              <path
                d="M10.1214 14.364C8.94978 13.1924 8.94978 11.2929 10.1214 10.1214C11.2929 8.94978 13.1924 8.94978 14.364 10.1214C14.8096 10.567 15.1209 11.4921 15.3355 12.4675C15.6564 13.926 15.8169 14.6553 15.2361 15.2361C14.6553 15.8169 13.926 15.6564 12.4675 15.3355C11.4921 15.1209 10.567 14.8096 10.1214 14.364Z"
                stroke-width="1" />
              <path
                d="M9 21.5422C4.94289 20.2679 2 16.4776 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 16.4776 19.0571 20.2679 15 21.5422"
                stroke-width="1" stroke-linecap="round" />
            </svg>
          </div>

          <div v-else-if="ticket.ticket.estat==='Recollit'" class="recollit">
            <svg stroke="currentColor" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 14H3" stroke-width="1" stroke-linecap="round" />
              <path d="M8 18H3" stroke-width="1" stroke-linecap="round" />
              <path d="M17 16.5V12.5V8" stroke-width="1" stroke-linecap="round" />
              <circle cx="14.5" cy="16.5" r="2.5" stroke-width="1" />
              <path d="M21 12C18.7909 12 17 10.2091 17 8" stroke-width="1" stroke-linecap="round" />
              <path d="M3 6H10.4118M15 6H13.4118" stroke-width="1" stroke-linecap="round" />
              <path d="M13 10L6.82353 10M3 10H4.32353" stroke-width="1" stroke-linecap="round" />
            </svg>
          </div>
          <p>{{ticket.ticket.estat}}</p>
          <button @click="cambiarDiv('portada')" class="button is-black">Tornar a l'inici</button>
        </div>
      </div>
    </div>


    <!-- FOOTER -->
    <div v-if="navegacion.divActual!='portada'" class="container-footer">
      <footer>
        <div class="button-container">
          <button :class="['button-footer',{'clicked': mostrar('portada')}]" @click="cambiarDiv('portada')">
            <svg width="50px" height="50px" stroke="currentColor" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path d="M22 22L2 22" fill="none" stroke-width="1" stroke-linecap="round" />
              <path
                d="M2 11L6.06296 7.74968M22 11L13.8741 4.49931C12.7784 3.62279 11.2216 3.62279 10.1259 4.49931L9.34398 5.12486"
                stroke-width="1" stroke-linecap="round" />
              <path d="M15.5 5.5V3.5C15.5 3.22386 15.7239 3 16 3H18.5C18.7761 3 19 3.22386 19 3.5V8.5" stroke-width="1"
                stroke-linecap="round" />
              <path d="M4 22V9.5" stroke-width="1" stroke-linecap="round" />
              <path d="M20 9.5V13.5M20 22V17.5" stroke-width="1" stroke-linecap="round" />
              <path
                d="M15 22V17C15 15.5858 15 14.8787 14.5607 14.4393C14.1213 14 13.4142 14 12 14C10.5858 14 9.87868 14 9.43934 14.4393M9 22V17"
                stroke-width="1" stroke-linecap="round" stroke-linejoin="round" />
              <path
                d="M14 9.5C14 10.6046 13.1046 11.5 12 11.5C10.8954 11.5 10 10.6046 10 9.5C10 8.39543 10.8954 7.5 12 7.5C13.1046 7.5 14 8.39543 14 9.5Z"
                stroke-width="1" />
            </svg>
          </button>
          <button :class="['button-footer',{'clicked': mostrar('tienda')}]" @click="cambiarDiv('tienda')">
            <svg stroke="currentColor" width="50px" height="50px" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M19.5 9.5L18.7896 6.89465C18.5157 5.89005 18.3787 5.38775 18.0978 5.00946C17.818 4.63273 17.4378 4.34234 17.0008 4.17152C16.5619 4 16.0413 4 15 4M4.5 9.5L5.2104 6.89465C5.48432 5.89005 5.62128 5.38775 5.90221 5.00946C6.18199 4.63273 6.56216 4.34234 6.99922 4.17152C7.43808 4 7.95872 4 9 4"
                stroke-width="1" />
              <path
                d="M9 4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4C15 4.55228 14.5523 5 14 5H10C9.44772 5 9 4.55228 9 4Z"
                stroke-width="1" />
              <path d="M8 13V17" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M16 13V17" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M12 13V17" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" />
              <path
                d="M3.864 16.4552C4.40967 18.6379 4.68251 19.7292 5.49629 20.3646C6.31008 21 7.435 21 9.68486 21H14.3155C16.5654 21 17.6903 21 18.5041 20.3646C19.3179 19.7292 19.5907 18.6379 20.1364 16.4552C20.9943 13.0234 21.4233 11.3075 20.5225 10.1538C19.6217 9 17.853 9 14.3155 9H9.68486C6.14745 9 4.37875 9 3.47791 10.1538C2.94912 10.831 2.87855 11.702 3.08398 13"
                stroke-width="1" stroke-linecap="round" />
            </svg>
          </button>

          <button :class="['button-footer','shop-cart',{'clicked': mostrar('carro')}]" @click="cambiarDiv('carro')"
            :disabled="carrito.productesAddToCart.length===0">
            <svg stroke="currentColor" width="50px" height="50px" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M7.5 18C8.32843 18 9 18.6716 9 19.5C9 20.3284 8.32843 21 7.5 21C6.67157 21 6 20.3284 6 19.5C6 18.6716 6.67157 18 7.5 18Z"
                stroke-width="1" />
              <path
                d="M16.5 18.0001C17.3284 18.0001 18 18.6716 18 19.5001C18 20.3285 17.3284 21.0001 16.5 21.0001C15.6716 21.0001 15 20.3285 15 19.5001C15 18.6716 15.6716 18.0001 16.5 18.0001Z"
                stroke-width="1" />
              <path
                d="M2 3L2.26121 3.09184C3.5628 3.54945 4.2136 3.77826 4.58584 4.32298C4.95808 4.86771 4.95808 5.59126 4.95808 7.03836V9.76C4.95808 12.7016 5.02132 13.6723 5.88772 14.5862C6.75412 15.5 8.14857 15.5 10.9375 15.5H12M16.2404 15.5C17.8014 15.5 18.5819 15.5 19.1336 15.0504C19.6853 14.6008 19.8429 13.8364 20.158 12.3075L20.6578 9.88275C21.0049 8.14369 21.1784 7.27417 20.7345 6.69708C20.2906 6.12 18.7738 6.12 17.0888 6.12H11.0235M4.95808 6.12H7"
                stroke-width="1" stroke-linecap="round" />
            </svg>
            <div v-if="carrito.productesAddToCart.length!=0" class="bubble">{{calcularTotalCarrito()}}</div>
          </button>
        </div>
      </footer>
    </div>

    <script src="js/project.js" type="module"></script>
  </div>
</body>

</html>